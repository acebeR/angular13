{"ast":null,"code":"var _class;\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nexport class NumeroDirective {\n  constructor(el) {\n    this.el = el;\n  }\n  onKeyUp($event) {\n    let valor = $event.target.value;\n    let posDecimais = valor.indexOf('.');\n    valor = valor.replace(/[\\D]/g, '');\n    if (posDecimais > 0) {\n      valor = valor.substr(0, posDecimais) + '.' + valor.substr(posDecimais);\n    }\n    $event.target.value = valor;\n    this.onChange(valor);\n  }\n  registerOnChange(fn) {\n    this.onChange = fn;\n  }\n  registerOnTouched(fn) {\n    this.onTouche = fn;\n  }\n  writeValue(value) {\n    this.el.nativeElement.value = value;\n  }\n}\n_class = NumeroDirective;\n_class.ɵfac = function NumeroDirective_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i0.ElementRef));\n};\n_class.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n  type: _class,\n  selectors: [[\"\", \"numero\", \"\"]],\n  hostBindings: function NumeroDirective_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"keyup\", function NumeroDirective_keyup_HostBindingHandler($event) {\n        return ctx.onKeyUp($event);\n      });\n    }\n  },\n  features: [i0.ɵɵProvidersFeature([{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: _class,\n    multi: true\n  }])]\n});","map":{"version":3,"names":["NG_VALUE_ACCESSOR","NumeroDirective","constructor","el","onKeyUp","$event","valor","target","value","posDecimais","indexOf","replace","substr","onChange","registerOnChange","fn","registerOnTouched","onTouche","writeValue","nativeElement","i0","ɵɵdirectiveInject","ElementRef","selectors","hostBindings","NumeroDirective_HostBindings","rf","ctx","provide","useExisting","multi"],"sources":["C:\\Users\\acebe\\Documents\\Git\\angular13\\projeto-final\\src\\app\\conversor\\directives\\numero.directive.ts"],"sourcesContent":["import { Directive, ElementRef, HostListener } from '@angular/core';\r\nimport { NG_VALUE_ACCESSOR,ControlValueAccessor } from '@angular/forms'\r\n@Directive({\r\n  selector: '[numero]',\r\n  providers: [{ provide: NG_VALUE_ACCESSOR, useExisting: NumeroDirective,multi: true }]\r\n})\r\nexport class NumeroDirective implements ControlValueAccessor{\r\n  onTouche: any;\r\n  onChange: any;\r\n\r\n  constructor( private el: ElementRef) { }\r\n  @HostListener('keyup',['$event'])\r\n  onKeyUp($event: any){\r\n    let valor = $event.target.value;\r\n    let posDecimais = valor.indexOf('.');\r\n\r\n    valor = valor.replace(/[\\D]/g,'');\r\n\r\n    if(posDecimais > 0){\r\n      valor = valor.substr(0,posDecimais) + '.' + valor.substr(posDecimais);\r\n    }\r\n\r\n    $event.target.value = valor;\r\n    this.onChange(valor);\r\n  }\r\n\r\n  registerOnChange(fn: any): void{\r\n    this.onChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: any): void{\r\n    this.onTouche = fn;\r\n  }\r\n\r\n  writeValue(value: any): void{\r\n    this.el.nativeElement.value = value;\r\n  }\r\n}\r\n"],"mappings":";AACA,SAASA,iBAAiB,QAA6B,gBAAgB;;AAKvE,OAAM,MAAOC,eAAe;EAI1BC,YAAqBC,EAAc;IAAd,KAAAA,EAAE,GAAFA,EAAE;EAAgB;EAEvCC,OAAOA,CAACC,MAAW;IACjB,IAAIC,KAAK,GAAGD,MAAM,CAACE,MAAM,CAACC,KAAK;IAC/B,IAAIC,WAAW,GAAGH,KAAK,CAACI,OAAO,CAAC,GAAG,CAAC;IAEpCJ,KAAK,GAAGA,KAAK,CAACK,OAAO,CAAC,OAAO,EAAC,EAAE,CAAC;IAEjC,IAAGF,WAAW,GAAG,CAAC,EAAC;MACjBH,KAAK,GAAGA,KAAK,CAACM,MAAM,CAAC,CAAC,EAACH,WAAW,CAAC,GAAG,GAAG,GAAGH,KAAK,CAACM,MAAM,CAACH,WAAW,CAAC;;IAGvEJ,MAAM,CAACE,MAAM,CAACC,KAAK,GAAGF,KAAK;IAC3B,IAAI,CAACO,QAAQ,CAACP,KAAK,CAAC;EACtB;EAEAQ,gBAAgBA,CAACC,EAAO;IACtB,IAAI,CAACF,QAAQ,GAAGE,EAAE;EACpB;EAEAC,iBAAiBA,CAACD,EAAO;IACvB,IAAI,CAACE,QAAQ,GAAGF,EAAE;EACpB;EAEAG,UAAUA,CAACV,KAAU;IACnB,IAAI,CAACL,EAAE,CAACgB,aAAa,CAACX,KAAK,GAAGA,KAAK;EACrC;;SA9BWP,eAAe;;mBAAfA,MAAe,EAAAmB,EAAA,CAAAC,iBAAA,CAAAD,EAAA,CAAAE,UAAA;AAAA;;QAAfrB,MAAe;EAAAsB,SAAA;EAAAC,YAAA,WAAAC,6BAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;;eAAfC,GAAA,CAAAvB,OAAA,CAAAC,MAAA,CAAe;MAAA;;;mCAFf,CAAC;IAAEuB,OAAO,EAAE5B,iBAAiB;IAAE6B,WAAW,EAAE5B,MAAe;IAAC6B,KAAK,EAAE;EAAI,CAAE,CAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}